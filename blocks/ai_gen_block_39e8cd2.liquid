{% doc %}
  @prompt
    Create an improved blog article template layout that prevents title and featured image from overlapping. The design should have proper spacing between elements, with the title positioned clearly above or below the featured image, and include responsive styling to ensure the layout works well on all device sizes.

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-blog-article-{{ ai_gen_id }} {
    margin: 0 auto;
    max-width: {{ block.settings.content_width }}px;
    padding: 0 20px;
  }

  .ai-blog-article__header-{{ ai_gen_id }} {
    margin-bottom: {{ block.settings.spacing_after_header }}px;
    text-align: {{ block.settings.title_alignment }};
  }

  .ai-blog-article__meta-{{ ai_gen_id }} {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    margin-bottom: {{ block.settings.spacing_after_meta }}px;
    font-size: {{ block.settings.meta_font_size }}px;
    color: {{ block.settings.meta_text_color }};
  }

  .ai-blog-article__meta-item-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .ai-blog-article__meta-icon-{{ ai_gen_id }} {
    width: 16px;
    height: 16px;
  }

  .ai-blog-article__title-{{ ai_gen_id }} {
    margin: 0 0 {{ block.settings.spacing_after_title }}px;
    font-size: {{ block.settings.title_font_size }}px;
    color: {{ block.settings.title_color }};
    line-height: 1.2;
  }

  .ai-blog-article__featured-image-container-{{ ai_gen_id }} {
    margin-bottom: {{ block.settings.spacing_after_image }}px;
    border-radius: {{ block.settings.image_border_radius }}px;
    overflow: hidden;
  }

  .ai-blog-article__featured-image-{{ ai_gen_id }} {
    display: block;
    width: 100%;
    height: auto;
    max-height: {{ block.settings.image_max_height }}px;
    object-fit: cover;
  }

  .ai-blog-article__featured-image-placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 0;
    padding-bottom: 56.25%;
    position: relative;
    background-color: #f4f4f4;
    border-radius: {{ block.settings.image_border_radius }}px;
  }

  .ai-blog-article__featured-image-placeholder-{{ ai_gen_id }} svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    padding: 10%;
  }

  .ai-blog-article__content-{{ ai_gen_id }} {
    font-size: {{ block.settings.content_font_size }}px;
    line-height: {{ block.settings.content_line_height }};
    color: {{ block.settings.content_text_color }};
  }

  @media screen and (max-width: 749px) {
    .ai-blog-article__title-{{ ai_gen_id }} {
      font-size: {{ block.settings.title_font_size | times: 0.8 }}px;
    }

    .ai-blog-article__meta-{{ ai_gen_id }} {
      font-size: {{ block.settings.meta_font_size | times: 0.9 }}px;
    }

    .ai-blog-article__content-{{ ai_gen_id }} {
      font-size: {{ block.settings.content_font_size | times: 0.9 }}px;
    }
  }
{% endstyle %}

<article class="ai-blog-article-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% if block.settings.image_position == 'above_title' %}
    {% if article.image %}
      <div class="ai-blog-article__featured-image-container-{{ ai_gen_id }}">
        <img
          src="{{ article.image | image_url: width: 1200 }}"
          alt="{{ article.image.alt | escape }}"
          width="{{ article.image.width }}"
          height="{{ article.image.height }}"
          loading="lazy"
          class="ai-blog-article__featured-image-{{ ai_gen_id }}"
        >
      </div>
    {% else %}
      <div class="ai-blog-article__featured-image-placeholder-{{ ai_gen_id }}">
        {{ 'image' | placeholder_svg_tag }}
      </div>
    {% endif %}
  {% endif %}

  <header class="ai-blog-article__header-{{ ai_gen_id }}">
    <h1 class="ai-blog-article__title-{{ ai_gen_id }}">{{ article.title }}</h1>

    {% if block.settings.show_meta %}
      <div class="ai-blog-article__meta-{{ ai_gen_id }}">
        {% if block.settings.show_date %}
          <div class="ai-blog-article__meta-item-{{ ai_gen_id }}">
            <svg class="ai-blog-article__meta-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8 2V5M16 2V5M3.5 9.09H20.5M21 8.5V17C21 20 19.5 22 16 22H8C4.5 22 3 20 3 17V8.5C3 5.5 4.5 3.5 8 3.5H16C19.5 3.5 21 5.5 21 8.5Z" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <time datetime="{{ article.published_at | date: '%Y-%m-%d' }}">
              {{ article.published_at | date: block.settings.date_format }}
            </time>
          </div>
        {% endif %}

        {% if block.settings.show_author and article.author %}
          <div class="ai-blog-article__meta-item-{{ ai_gen_id }}">
            <svg class="ai-blog-article__meta-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M20.5899 22C20.5899 18.13 16.7399 15 11.9999 15C7.25991 15 3.40991 18.13 3.40991 22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>{{ article.author }}</span>
          </div>
        {% endif %}

        {% if block.settings.show_comments and blog.comments_enabled? %}
          <div class="ai-blog-article__meta-item-{{ ai_gen_id }}">
            <svg class="ai-blog-article__meta-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8.5 19H8C4 19 2 18 2 13V8C2 4 4 2 8 2H16C20 2 22 4 22 8V13C22 17 20 19 16 19H15.5C15.19 19 14.89 19.15 14.7 19.4L13.2 21.4C12.54 22.28 11.46 22.28 10.8 21.4L9.3 19.4C9.14 19.18 8.77 19 8.5 19Z" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>{{ article.comments_count }} {{ article.comments_count | pluralize: 'comment', 'comments' }}</span>
          </div>
        {% endif %}
      </div>
    {% endif %}
  </header>

  {% if block.settings.image_position == 'below_title' %}
    {% if article.image %}
      <div class="ai-blog-article__featured-image-container-{{ ai_gen_id }}">
        <img
          src="{{ article.image | image_url: width: 1200 }}"
          alt="{{ article.image.alt | escape }}"
          width="{{ article.image.width }}"
          height="{{ article.image.height }}"
          loading="lazy"
          class="ai-blog-article__featured-image-{{ ai_gen_id }}"
        >
      </div>
    {% else %}
      <div class="ai-blog-article__featured-image-placeholder-{{ ai_gen_id }}">
        {{ 'image' | placeholder_svg_tag }}
      </div>
    {% endif %}
  {% endif %}

  <div class="ai-blog-article__content-{{ ai_gen_id }}">
    {{ article.content }}
  </div>
</article>

{% schema %}
{
  "name": "Improved Blog Article",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Featured image position",
      "options": [
        {
          "value": "above_title",
          "label": "Above title"
        },
        {
          "value": "below_title",
          "label": "Below title"
        }
      ],
      "default": "below_title"
    },
    {
      "type": "range",
      "id": "content_width",
      "min": 600,
      "max": 1200,
      "step": 50,
      "unit": "px",
      "label": "Content width",
      "default": 800
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "spacing_after_header",
      "min": 0,
      "max": 60,
      "step": 5,
      "unit": "px",
      "label": "Space after header",
      "default": 30
    },
    {
      "type": "range",
      "id": "spacing_after_title",
      "min": 0,
      "max": 40,
      "step": 5,
      "unit": "px",
      "label": "Space after title",
      "default": 20
    },
    {
      "type": "range",
      "id": "spacing_after_meta",
      "min": 0,
      "max": 40,
      "step": 5,
      "unit": "px",
      "label": "Space after meta info",
      "default": 20
    },
    {
      "type": "range",
      "id": "spacing_after_image",
      "min": 0,
      "max": 60,
      "step": 5,
      "unit": "px",
      "label": "Space after image",
      "default": 30
    },
    {
      "type": "header",
      "content": "Title"
    },
    {
      "type": "select",
      "id": "title_alignment",
      "label": "Title alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "range",
      "id": "title_font_size",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Title font size",
      "default": 36
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Meta Information"
    },
    {
      "type": "checkbox",
      "id": "show_meta",
      "label": "Show meta information",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_date",
      "label": "Show date",
      "default": true
    },
    {
      "type": "text",
      "id": "date_format",
      "label": "Date format",
      "default": "%B %d, %Y",
      "info": "Example: January 1, 2023. See Liquid date formats."
    },
    {
      "type": "checkbox",
      "id": "show_author",
      "label": "Show author",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_comments",
      "label": "Show comments count",
      "default": true
    },
    {
      "type": "range",
      "id": "meta_font_size",
      "min": 12,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Meta font size",
      "default": 14
    },
    {
      "type": "color",
      "id": "meta_text_color",
      "label": "Meta text color",
      "default": "#666666"
    },
    {
      "type": "header",
      "content": "Featured Image"
    },
    {
      "type": "range",
      "id": "image_max_height",
      "min": 200,
      "max": 800,
      "step": 50,
      "unit": "px",
      "label": "Maximum image height",
      "default": 500
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Image border radius",
      "default": 8
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "range",
      "id": "content_font_size",
      "min": 14,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Content font size",
      "default": 16
    },
    {
      "type": "range",
      "id": "content_line_height",
      "min": 1.3,
      "max": 2,
      "step": 0.1,
      "label": "Content line height",
      "default": 1.6
    },
    {
      "type": "color",
      "id": "content_text_color",
      "label": "Content text color",
      "default": "#333333"
    }
  ],
  "presets": [
    {
      "name": "Improved Blog Article"
    }
  ]
}
{% endschema %}